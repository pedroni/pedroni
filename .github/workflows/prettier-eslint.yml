name: Prettier & ESlint

on:
  pull_request:
  push:
    branches:
      - main

jobs:
  runs-on: ubuntu-latest

  steps:
    - name: Checkout
      uses: actions/checkout@v3
      with:
        ref: ${{ github.head_ref }}

    - name: Cache dependencies
      uses: actions/cache@v3
      with:
        path: ~/.npm
        key: npm-${{ hashFiles('package-lock.json') }}
        restore-keys: npm-

    - name: Install dependencies
      run: npm ci --ignore-scripts

    - name: Prettify code
      uses: creyD/prettier_action@v4.2

    - name: Run ESLint
      run: npx eslint .
